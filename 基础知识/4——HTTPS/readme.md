
###

    1）  
            服务器 与 CA 认证机构的签发流程。 服务器主动去CA签发。
            
            确认！！
                服务器请求CA机构签发的流程，是手动还是网络自动？（请求机制是怎样的？）
                请求认证时机是怎样的，然后，是否会多次请求？
                
            因为，遇到了，证书失效的情况，因此，就应该不会定期去CA更新证书，
            所以，证书应该是手动签发，还给了证书使用年限。
            
            
    2）
            客户端【也就是浏览器】的根证书 与 CA认证机构的 认证方式是如何的？
            猜测 ——  1：这个应该会定期拉取更新所有，
                    2：还是，访问某一个域名的时候，发现无法确认是否是真的，通过网络去CA认证机构确认？
            
            
    3）     【在图中的 2，3，4】
            如何保证，全程被窃听的时候，还能够协商出一个双方加、解密的秘钥。
            保证数据安全，虽然可以被窃听随机数，但无法解密传输数据。
            
                就像fiddler一样，还是能本地窃听HTTPS，如果把fildder网络中，窃听如何解决，比较迷惑。
                猜测 ———— 通过算法保证，算法如何在理论上保证，是因为破解计算量比较大，难度过高。
            
            
    4）      客户端 服务器 共同拥有三个随机数， rns，rnc，pms。
            各自用什么算法，生成的是否为同一个ms，是否相同。这个还有疑虑。
            生成ms后，使用什么算法，加密MS，生成会话秘钥。【最后的，会话秘钥应该是相同】
    
    
    
## node-easy-cert 做代理劫持的一个npm包
    
    
    
###
------------------------------[ richieli  贡献 ]-------------------------
问题1：
这里可以看下网上的 生成自签名证书 的示例，会帮助更清晰的理解哈。
肯定是服务器向CA发起证书请求的，也必须是通过网络请求哈，请求机制文章中图里面有画，
大略为：在每台服务器计算机上，针对服务器创建数字证书请求，并将该证书请求发送至可信 CA 以进行授权。
CA 将向证书请求授权并使用其自签名根证书来生成服务器证书（有的ca发email，有的提供web站点供下载）。

过期原因：系统时间不正确（调整系统时间至证书有效期内）；证书确实过期了（主动去ca续签）。
（根据最新的https安全证书签发国际标准，https安全证书颁发不能超过39个月。）

CA架构包括PKI结构、高强度抗攻击的公开加解密算法、数字签名技术、身份认证技术、运行安全管理技术、可靠的信任责任体系等等。 
每个步骤都有专门的技术提供服务，不知道你说的手动和人工审核是不是一回事，这里我没了解过，估计会有人跟踪签发状态吧，
感觉不用纠结这些哈。CA中心对实体的物理身份资格审查通过后，才对申请者颁发数字证书，将实体的身份与数字证书对应起来。
由于实体都信任提供第三方服务的CA中心，因此，实体可以信任由CA中心颁发数字证书的其他实体，放心地在网上进行作业和交易。

问题2.
ca认证方式上面提了下，ca根证书通常会预置到客户端根证书中，
客户端是通过预置到客户端的ca根证书进行验证的，由根证书签发的服务器证书会建立一个信任链的机制，
只要由该ca签发的服务器证书都会被信任，一般不会再发请求去ca验证了，维护ca根证书一般是客户端浏览器完成的。


问题3：
要是把fiddler用于攻击其他人，首先，其他客户端都要安装你的fiddler代理服务器的自签名证书，这点显然不可能的。
不是破解难度大，而是目前根本没有可行的算法破解哦。可以了解下离散对数。

问题4：
这几个说了是随机数哦，他们真的是随机数，在非对称加密过程中一般使用RSA算法吧，生成的主密钥每个客户端之间不会相同的，
主密钥一般用于加密密钥，会话密钥加密内容，你可以搜索一下这两个名词。

推荐读物：
《https权威指南》
《图解http》

推荐先看下这些读物哈，巩固下基础，不然我想讲清楚可能会花很大的篇幅，也可能我的理解不对，误导了你哈 


需求太多 才有时间回复 还望见谅

问题4：
  4）      客户端 服务器 共同拥有三个随机数， rns，rnc，pms。
            各自用什么算法，生成的是否为同一个ms，是否相同。这个还有疑虑。
            生成ms后，使用什么算法，加密MS，生成会话秘钥。【最后的，会话秘钥应该是相同】

这里客户端和服务器和fiddler最后都是同一个哈

非对称加密算法：RSA，DSA/DSS 


对称加密算法：AES，RC4，3DES 
HASH算法：MD5，SHA1，SHA256
    
    
    
###

```js

    var https = require('https');
    
    https.get('https://kyfw.12306.cn/otn/regist/init', function(res){
        res.on('data', function(data){
            process.stdout.write(data);
        });
    }).on('error', function(err){
        console.error(err);
    });


```
    { Error: self signed certificate in certificate chain
        at Error (native)
        at TLSSocket.<anonymous> (_tls_wrap.js:1085:38)
        at emitNone (events.js:86:13)
        at TLSSocket.emit (events.js:185:7)
        at TLSSocket._finishInit (_tls_wrap.js:603:8)
        at TLSWrap.ssl.onhandshakedone (_tls_wrap.js:433:38) code: 'SELF_SIGNED_CERT_IN_CHAIN' }
    
    
    
    
    
    
    
    
    
    